## 目次

- [目次](#目次)
- [必要なもの](#必要なもの)
  - [基板](#基板)
  - [3D プリンタ造形部品](#3d-プリンタ造形部品)
  - [実装する部品](#実装する部品)
  - [ケーブル](#ケーブル)
  - [使用する部品](#使用する部品)
  - [工具](#工具)
- [本体の作成](#本体の作成)
  - [ケーブル加工](#ケーブル加工)
  - [3D プリント造形部品の追加加工](#3d-プリント造形部品の追加加工)
  - [基板のはんだ付け](#基板のはんだ付け)
    - [センサモジュール基板](#センサモジュール基板)
    - [メイン基板](#メイン基板)
    - [サイドキーパッド基板](#サイドキーパッド基板)
    - [親指モジュール基板](#親指モジュール基板)
    - [OLED モジュール基板](#oled-モジュール基板)
    - [追加キーパッドモジュール基板](#追加キーパッドモジュール基板)
    - [メイン基板とサイドキーパッド基板の配線](#メイン基板とサイドキーパッド基板の配線)
  - [組み立て](#組み立て)

## 必要なもの

### 基板

| 名前                         | 数  |                                  データへのリンク                                   |
| :--------------------------- | :-: | :---------------------------------------------------------------------------------: |
| メイン基板                   |  1  |  [こちら](https://github.com/ParRot-3DMouse/ParRotHardware/tree/main/1.0/PCB/main)  |
| センサモジュール基板         |  1  | [こちら](https://github.com/ParRot-3DMouse/ParRotHardware/tree/main/1.0/PCB/sensor) |
| サイドキーパッド基板         |  1  |  [こちら](https://github.com/ParRot-3DMouse/ParRotHardware/tree/main/1.0/PCB/side)  |
| OLED モジュール基板          |  1  |  [こちら](https://github.com/ParRot-3DMouse/ParRotHardware/tree/main/1.0/PCB/OLED)  |
| 親指モジュール基板           |  1  | [こちら](https://github.com/ParRot-3DMouse/ParRotHardware/tree/main/1.0/PCB/thumb)  |
| 追加キーパッドモジュール基板 |  1  | [こちら](https://github.com/ParRot-3DMouse/ParRotHardware/tree/main/1.0/PCB/extra)  |

### 3D プリンタ造形部品

| 名前                           | 数  | ファイル名              |
| :----------------------------- | :-: | :---------------------- |
| 本体底面部                     |  1  | bottom.step             |
| 本体カバー                     |  1  | body_cover.step         |
| debug カバー                   |  1  | debug_cover.step        |
| OLED モジュールカバー          |  1  | OLED_cover.step         |
| 親指モジュールカバー           |  1  | SW_cover.step           |
| ボール保持部                   |  1  | ball_holder.step        |
| ボール保持部カバー             |  1  | ball_holder_cover.step  |
| 追加キーパッドモジュール底面部 |  1  | side_bottom.step        |
| 追加キーパッドモジュールカバー |  1  | side_cover.step         |
| 親指部キーキャップ 1           |  1  | thumb_keycap1.step      |
| 親指部キーキャップ 2           |  1  | thumb_keycap1.step      |
| ジョイント                     |  2  | jount.step              |
| (はんだ付け用治具 1)           |  1  | はんだ付け用治具 1.step |
| (はんだ付け用治具 2)           |  1  | はんだ付け用治具 2.step |

### 実装する部品

| 名前                     | 概要                                         | 数   | 主な調達先 |
| :----------------------- | :------------------------------------------- | :--- | :--------- |
| PMW3360                  | イメージセンサ                               | 2    | Aliexpress |
| 1n4148w                  | 表面実装ダイオード                           | 11   | 秋月       |
| sk6812MINI-E             | マイコン内蔵フルカラー LED                   | 5    | 秋月       |
| Kailh Swich socket(MX)   | CherryMX スイッチのソケット                  | 9    | 遊舎工房   |
| Kailh Swich socket(Choc) | Choc v1 スイッチのソケット                   | 2    | 遊舎工房   |
| OLED                     | 128x32pixcel の SSD1306 登載 OLED モジュール | 1    | 遊舎工房   |
| SKRPABE010               | 表面実装スイッチ                             | 3    | 秋月       |
| S6B-PH-KL                | PH コネクタ ベース付ポスト(サイド型)6 極     | 5    | 千石電商   |
| S8B-PH-KL                | PH コネクタ ベース付ポスト(サイド型)8 極     | 1    | 千石電商   |
| B6B-PH-KL                | PH コネクタ ベース付ポスト(トップ型)6 極     | 1or2 | 秋月       |
| SKS-01                   | ジャンパワイヤ(2.54mm)                       | 6    | Amazon     |
| ピンヘッダ               | ハウジング高さ 2.5mm，2.54mm ピッチ，4 ピン  | 1    | (秋月)     |

ピンヘッダは多くの場合，OLED モジュールに付属しています．

### ケーブル

| 名前           | 概要                         | 数  | 主な調達先 |
| :------------- | :--------------------------- | :-: | :--------: |
| PHR-6          | PH コネクタ　ハウジング 6 極 |  6  |    秋月    |
| PHR-8          | PH コネクタ　ハウジング 8 極 |  1  |    秋月    |
| SPH-002T-P0.5L | PH コネクタ コンタクト       | 44  |    秋月    |

### 使用する部品

| 名前                | 概要                       | 数  |                    主な調達先                    |
| :------------------ | :------------------------- | :-: | :----------------------------------------------: |
| M2 インサートナット | 3.5mm x 4mm(直径 x 高さ)   | 12  | [Amazon](https://www.amazon.co.jp/dp/B09NNPNGB8) |
| M2 4mm ネジ         |                            |  6  |                                                  |
| M2 6mm ネジ         |                            |  2  |                                                  |
| M2 8mm ネジ         |                            |  1  |                                                  |
| M2 10mm ネじ        |                            |  2  |                                                  |
| M2 20mm ネジ        |                            |  1  |                                                  |
| M3 8mm ネジ         |                            |  4  |                                                  |
| M3 ナット           |                            |  4  |                                                  |
| M3 ワッシャ         |                            |  4  |                                                  |
| 磁石                | 直径 6mm 厚み 2.5mm のもの |  4  |                      セリア                      |
| ゴム足              | 直径 10mm のもの           |  7  | [aitendo](https://www.aitendo.com/product/14406) |

### 工具

ParRot を作成する際に使用した工具を次に示します．

- はんだごて一式
- ピンセット
- ニッパー
- ペンチ
- ワイヤーストリッパ
- 圧着工具
- 精密ドライバーセット
- ピンバイス
- 接着剤
- 3D プリンタ

消耗品

- はんだ
- ハンダフラックス
- 接着剤
- マスキングテープ

## 本体の作成

### ケーブル加工

使用するケーブルは次の通りです．

| 番号 | ケーブル本数 | 使用するハウジング | 長さ | 向き |
| :--- | :----------- | :----------------- | :--- | :--- |
| 1    | 6            | 6P                 | 13mm | 逆   |
| 2    | 6            | 6P                 | 25mm | 逆   |
| 3    | 6            | 6P                 | 30mm | 順   |
| 4    | 5            | 8P                 | 80mm | ー   |

![01](doc/img/cable/cable.png)
4 について
コンタクトが見える側で ↓ のようにケーブルを差し込んでください．  
|o|o|-|-|o|o|o|-|

### 3D プリント造形部品の追加加工

事前にサポート材をすべて除去してください．
また，ピンバイス等を用いてネジを通す穴をネジが通るように加工してください．

1. インサートナットを熱圧入します．
   本体底面部においては次の 8 箇所にインサートナットを圧入します．  
   ![本体底面部インサートナット](doc/img/3dprint/insert_bottom.png)  
   本体カバーにおいては次の 1 箇所にインサートナットを圧入します．  
   ![本体カバーインサートナット](doc/img/3dprint/insert_cover.jpg)  
   ボール保持部においては次の 2 箇所にインサートナットを圧入します．  
   ![ボール保持部インサートナット](doc/img/3dprint/insert_ball.jpg)  
   追加キーパッドモジュール底面部においては次の 2 箇所にインサートナットを圧入します．  
   ![追加キーパッドモジュール底面部インサートナット](doc/img/3dprint/insert_add_key_pad.jpg)
2. 磁石を接着します．
   本体底面部において，次の二か所に磁石を接着します．
   接着剤を穴の底面と側面に塗布し，磁石を接着します．
   この際に，二つの磁石の極が異なるように配置してください．  
   ![本体底面部磁石](doc/img/3dprint/magnet_bottom.jpg)

debug カバーにおいて次の二か所に磁石を接着します．
この際に，本体底面部と引き合う向きで磁石を接着します．
![debugカバー磁石](doc/img/3dprint/magnet_debug.jpg)

3. ゴム足を取り付けます．
   本体底面部，追加キーパッドモジュール底面部にゴム足を接着します．
   くぼみがあるところにゴム足を接着します．
   ゴム足がはがれることが多かったので接着剤を使用することを推奨します．
   ![本体底面部ゴム足](doc/img/3dprint/rubber_bottom.jpg)
   ![追加キーパッドモジュール底面部ゴム足](doc/img/3dprint/rubber_add_key_pad.jpg)

### 基板のはんだ付け

#### センサモジュール基板

表面  
![センサ基板表面](doc/img/sensor_board/sensor_board_front.jpg)  
裏面  
![センサ基板裏面](doc/img/sensor_board/sensor_board_back.jpg)

センサ基板に実装する部品は次の通りです．

| 名前      | 概要                                     | 数  |
| :-------- | :--------------------------------------- | :-- |
| PMW3360   | イメージセンサ                           | 1   |
| S6B-PH-KL | PH コネクタ ベース付ポスト(サイド型)6 極 | 1   |

1. PMW3360 の実装
   PMW3360 を実装します．向きに注意してください．向きを基板裏面のシンボルに合わせます．裏面からセンサを基板に差し込み，表面ではんだ付けします．  
   ![センサ基板PMW3360実装裏](doc/img/sensor_board/PMW3360_back.jpg)  
   ![センサ基板PMW3360実装表](doc/img/sensor_board/PMW3360_front.jpg)

2. コネクタの実装
   次に，コネクタを実装します．
   裏面からコネクタを基板に差し込み，表面ではんだ付けします．  
   ![センサ基板コネクタ実装](doc/img/sensor_board/conn.jpg)
3. レンズの取り付け
   PMW3360 のレンズを取り付けます．  
   センサのカプトンテープを剥がし，レンズをセンサに取り付けます．  
   ![センサ基板レンズ取り付け](doc/img/sensor_board/lens.jpg)  
   センサから飛び出ているガイドポスト二か所を半田ごてで溶かし，レンズを固定します．  
   ![センサ基板レンズ固定](doc/img/sensor_board/lens_melt.jpg)

#### メイン基板

表面  
![メイン基板表面](doc/img/main_board/main_board_front.jpg)  
裏面  
![メイン基板裏面](doc/img/main_board/main_board_back.jpg)

メイン基板に実装する部品は次の通りです．

| 名前       | 概要                                     | 数     |
| :--------- | :--------------------------------------- | :----- |
| PMW3360    | イメージセンサ                           | 1      |
| SKRPABE010 | 表面実装スイッチ                         | 2      |
| S6B-PH-KL  | PH コネクタ ベース付ポスト(サイド型)6 極 | 2      |
| S8B-PH-KL  | PH コネクタ ベース付ポスト(サイド型)8 極 | 1      |
| B6B-PH-KL  | PH コネクタ ベース付ポスト(トップ型)6 極 | 1 or 2 |

1. スイッチの実装
   Boot スイッチと Reset スイッチを実装します．SKRPABE010 を表面に実装します．  
   ![メイン基板スイッチ実装](doc/img/main_board/BootReset.jpg)

2. PMW3360 の実装
   次に，PMW3360 を実装します．表面で足をはんだ付けします．向きに注意してください．向きを基板裏面のシンボルに合わせます．裏面からセンサを基板に差し込み，表面ではんだ付けします．  
   ![メイン基板PMW3360実装表](doc/img/main_board/PMW3360_front.jpg)  
   ![メイン基板PMW3360実装裏](doc/img/main_board/PMW3360_back.jpg)

3. コネクタの実装
次に，コネクタを実装していきます．  
初めに，センサモジュールとの接続用のコネクタ(S6B-PH-KL)を実装します.
表面からコネクタを基板に差し込み，裏面ではんだ付けします．  
![メイン基板センサコネクタ実装](doc/img/main_board/conn_sensor_front.jpg)  
次に，サイドキーパッドとの接続用のコネクタ(S8B-PH-KL)と OLED モジュールとの接続コネクタ(S6B-PH-KL)を実装します．裏面からコネクタを基板に差し込み，表面ではんだ付けします．  
![メイン基板サイドOLEDコネクタ実装](doc/img/main_board/conn_side_oled_back.jpg)  
次に，親指モジュールとの接続用のコネクタ(B6B-PH-KL)を実装します．裏面からコネクタを基板に差し込み，表面ではんだ付けします．  
![メイン基板親指コネクタ実装](doc/img/main_board/conn_thumb.jpg)  
任意でデバッグ用のコネクタを実装します．表面からコネクタを基板に差し込み，裏面ではんだ付けします．
<!--
![メイン基板デバグコネクタ実装](doc/img/main_board/conn_debug.jpg)
-->

4. レンズの取り付け
   センサ基板と同様の手順で PMW3360 のレンズを取り付けます．

#### サイドキーパッド基板

表面  
![サイドキーパッド基板表面](doc/img/side_board/side_key_pad_board_front.jpg)  
裏面  
![サイドキーパッド基板裏面](doc/img/side_board/side_key_pad_board_back.jpg)

実装する部品は次の通りです．
| 名前 | 概要 | 数 |
|:-|:-|:-|
| Kailh Swich socket(MX) | CherryMX スイッチのソケット | 3 |
| sk6812MINI-E | マイコン内蔵フルカラー LED | 3 |
| 1n4148w | 表面実装ダイオード | 3 |

裏面に部品を実装します．
LED,ダイオード，MX ソケットを実装します．LED，ダイオード実装の際には向きに注意してください．図のように基板のシルクに合わせて実装します．  
![サイドキーパッド基板裏面実装](doc/img/side_board/back_imple.jpg)  
![RGBLED注意](doc/img/side_board/LED_attention.jpg)  
![ダイオード注意](doc/img/side_board/diode_attention.jpg)

#### 親指モジュール基板

表面  
![親指モジュール基板表面](doc/img/thumb_board/thumb_board_front.jpg)  
裏面  
![親指モジュール基板裏面](doc/img/thumb_board/thumb_board_back.jpg)

実装する部品は次の通りです．
| 名前 | 概要 | 数 |
|:-|:-|:-|
| Kailh Swich socket(Choc) | Kailh_choc v1 スイッチのソケット | 2 |
| sk6812MINI-E | マイコン内蔵フルカラー LED | 2 |
| 1n4148w | 表面実装ダイオード | 2 |
| S6B-PH-KL | PH コネクタ ベース付ポスト(サイド型)6 極 | 1 |

裏面に部品を実装します．
LED,ダイオード，choc ソケットを実装します．choc ソケット，LED，ダイオード実装の際には向きに注意してください．
choc ソケットにも向きがあります．図のように飛び出している部分が外側を向くように実装します．  
![親指モジュール基板裏面実装](doc/img/thumb_board/back_imple.jpg)  
![RGBLED注意](doc/img/side_board/LED_attention.jpg)

接続用のコネクタを実装します．裏面からコネクタを基板に差し込み，表面ではんだ付けします．  
![親指モジュール基板コネクタ実装](doc/img/thumb_board/conn.jpg)

#### OLED モジュール基板

表面  
![OLEDモジュール基板表面](doc/img/oled_board/oled_board_front.jpg)  
裏面  
![OLEDモジュール基板裏面](doc/img/oled_board/oled_board_back.jpg)

実装する部品は次の通りです．
| 名前 | 概要 | 数 |
|:-|:-|:-|
| SKRPABE010 | 表面実装スイッチ | 1 |
| OLED | 128x32pixcel の SSD1306 登載 OLED モジュール| 1 |
| S6B-PH-KL | PH コネクタ ベース付ポスト(サイド型)6 極 | 1 |

1. スイッチの実装
   表面実装スイッチを表面に実装します．  
   ![OLEDモジュール基板表面実装](doc/img/oled_board/SW.jpg)

2. コネクタの実装
   次に，コネクタを実装します．裏面からコネクタを基板に差し込み，表面ではんだ付けします．  
   ![OLEDモジュール基板コネクタ実装](doc/img/oled_board/conn.jpg)

3. OLED の実装
   次に，OLED を実装します．  
   OLED にピンヘッダをはんだ付けします．  
   ![OLEDピンヘッダはんだ付け](doc/img/oled_board/oled_header.jpg)  
   OLED を基板に差し込みます．任意で基板の裏側から出ているピンヘッダを切断します．  
   基板の裏側からピンヘッダをはんだ付けします．この際に基板のエッジと OLED のエッジが平行になるように注意してください．大きくゆがんでいると組み立てた際に OLED の押し込みができなくなる場合があります．  
   ![OLED注意](doc/img/oled_board/oled_para.jpg)

#### 追加キーパッドモジュール基板

表面  
![追加キーパッドモジュール基板表面](doc/img/add_key_pad_board/add_key_pad_board_front.jpg)  
裏面  
![追加キーパッドモジュール基板裏面](doc/img/add_key_pad_board/add_key_pad_board_back.jpg)

実装する部品は次の通りです．
| 名前 | 概要 | 数 |
|:-|:-|:-|
|| CherryMX スイッチのソケット | 6 |
| 1n4148w | 表面実装ダイオード | 6 |

1. 表面実装部品の実装
   裏面に部品を実装します．
   ダイオード，MX ソケットを実装します．ダイオード実装の際には向きに注意してください．図のように基板のシルクに合わせて実装します．  
   ![追加キーパッドモジュール基板裏面実装](doc/img/add_key_pad_board/back_imple.jpg)  
   ![ダイオード注意](doc/img/side_board/diode_attention.jpg)

2. ケーブルの取り付け
   ケーブル 4 をはんだ付けします．ケーブルの向きに注意してください．ケーブルが外側を向きようにします．また，基板を裏面から見た際にハウジングが見える向きにします．  
   ![追加キーパッドモジュール基板ケーブル4](doc/img/add_key_pad_board/cable4.jpg)

ケーブルを反対側に折り曲げます．  
![追加キーパッドモジュール基板ケーブル4折り曲げ](doc/img/add_key_pad_board/cable4_bend.jpg)

#### メイン基板とサイドキーパッド基板の配線

メイン基板とサイドキーパッド基板を接続します．
本体底面部にメイン基板とサイドキーパッド基板を取り付けます．固定には M2 4mm ネジを 4 本使用します．  
![メイン基板サイドキーパッド基板取り付け](doc/img/main_side_board/mount.jpg)  
ジャンパワイヤを 7 本基板表側から差し込みます．  
![メイン基板サイドキーパッド基板配線](doc/img/main_side_board/insart.jpg)  
この状態でマスキングテープ等で固定します．  
![メイン基板サイドキーパッド基板配線](doc/img/main_side_board/tape.jpg)  
メイン基板とサイドキーパッド基板を外し，はんだ付け用治具 1,2 に取り付けます．  
![メイン基板サイドキーパッド基板配線](doc/img/main_side_board/jig.jpg)  
基板の裏側からジャンパワイヤをはんだ付けします．  
![メイン基板サイドキーパッド基板配線](doc/img/main_side_board/solder.jpg)  
余分なジャンパワイヤを切断します．  
![メイン基板サイドキーパッド基板配線](doc/img/main_side_board/cut.jpg)

### 組み立て

追加キーパッドモジュール底面部にジョイントを取り付けます．ねじは M3 8mm ネジを使用します．また，ジョイントの上下を M3 ワッシャで挟み，M3 ナットで締結します．  
![追加キーパッドモジュール底面部ジョイント](doc/img/assemble/joint1.jpg)  
本体底面部とジョイントを締結します．ねじは M3 8mm ネジを使用します．また，ジョイントの上下を M3 ワッシャで挟み，M3 ナットで締結します．  
![追加キーパッドモジュール底面部ジョイント](doc/img/assemble/joint2.jpg)

基板をケーブルで接続します．  
使用するケーブルは次の通りです．

- メイン基板 - センサモジュール基板  
  &rarr;ケーブル 1
- メイン基板 - 親指モジュール基板  
  &rarr;ケーブル 2
- メイン基板 - OLED モジュール基板  
  &rarr;ケーブル 3

また，メイン基板とサイドキーパッド基板の接続も行います．
![基板接続](doc/img/assemble/board_conn.jpg)

基板を本体底面部，追加キーパッドモジュール底面部にに取り付けます．
締結には M2 4mm ネジを使用します．締結箇所は次の 6 箇所です．
![基板取り付け](doc/img/assemble/board_mount.jpg)

本体カバーを取り付けます．
この際に M3 ナットの向きを調整してください．
![本体カバー取り付け](doc/img/assemble/cover_mount.jpg)

ボール保持部，ボール保持部カバーを取り付けます．
![ボール保持部取り付け](doc/img/assemble/ball_mount.jpg)

ねじで締結します．

| 番号 | 使用するねじ |
| :--: | :----------- |
|  1   | M2 8mm ネジ  |
|  2   | M2 10mm ネジ |
|  3   | M2 20mm ネジ |

![ねじ締結場所1](doc/img/assemble/screw1.png)  
![ねじ締結場所2](doc/img/assemble/screw2.png)

OLED モジュールカバーを取り付けます．締結には M2 8mm ネジを使用します．  
![OLEDモジュールカバー取り付け](doc/img/assemble/oled_cover_mount.jpg)

親指モジュールカバーを取り付けます．締結には M2 6mm ネジを使用します．  
![親指モジュールカバー取り付け](doc/img/assemble/thumb_cover_mount.jpg)

サイドキーパッドカバーを取り付けます．  
![サイドキーパッドカバー取り付け](doc/img/assemble/side_key_pad_cover_mount.jpg)

キースイッチを取り付けます．  
![キースイッチ取り付け](doc/img/assemble/key_switch_mount.jpg)

キーキャップを取り付けます．  
![キーキャップ取り付け](doc/img/assemble/key_cap_mount.jpg)
